<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<title>Home</title>
<style>
 body {
    font-family: 'PlayfairDisplayRegular', "Georgia", serif !important ;

}
</style>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
<link th:replace="templates/templates::link"></link>
</head>
<body>
	<div class="container">
		<div th:replace="templates/templates::menu"></div>
		<h2>Utwórz konto: </h2>
		<div class="row">
			<div class="col-md-6 col-md-offset-3">
		<form method="POST" th:object="${registerUser}" action="addSubmit">
      <div class="form-group">
    <label for="firstName">Imie</label>
    <input type="text" class="form-control" th:field="${registerUser.firstName}" id="firstName" placeholder="Podaj swoje imie"/>
  </div>
    <div class="form-group">
    <label for="lastName">Nazwisko</label>
    <input type="text" class="form-control" th:field="${registerUser.lastName}" id="lastName" placeholder="Podaj swoje nazwisko"/>
  </div>
    <div class="form-group">
    <label for="PESEL">PESEL</label>
    <input type="text" class="form-control"  th:field="${registerUser.PESEL}" id="PESEL" placeholder="Podaj swój PESEL"/>
  </div> 			
  <div class="form-group">
    <label for="email">Email address</label>
    <input type="email" class="form-control" th:field="${registerUser.email}" id="email" placeholder="Podaj swój email"/>
  </div>
  <div class="form-group">
    <label for="password">Password</label>
    <input type="password" class="form-control" th:field="${registerUser.password}" id="password1" placeholder="Podaj swoje hasło"/>
  </div>
    <!-- <div class="form-group">
    <label for="date">Data Urodzenia</label>
    <input type="date" class="form-control" id="date" placeholder="Data urodzenia"/>
  	</div>  -->
    <div class="form-group">
    <label for="region">Województwo</label>
    <select class="form-control" th:field="${registerUser.IdD}">
  <option   th:each="region : ${regions}"  th:text="${region.regionName}" th:field="${registerUser.IdD}" th:value="${region.id}"></option>
</select>
  </div>
    <div class="form-group">
    <label for="exampleInputPassword1">Miasto</label>
    <input type="text" class="form-control" id="exampleInputPassword1" th:field="${registerUser.city}" placeholder="Password"/>
  </div>
  <input type="hidden" th:name="${_csrf.parameterName}" id="csrfHeader" th:value="${_csrf.headerName}"/>
  
   <input type="hidden" th:name="${_csrf.parameterName}" id="csrfToken" th:value="${_csrf.token}" />
  <div class="form-group">
  <button type="submit" class="btn btn-default" >Zarejestruj</button>
  </div>
  </form>
  </div>
  </div>
      	<div th:replace="templates/templates::footer"></div>
	</div>

	<div th:replace="templates/templates::script"></div>
<script>
// alert($("form").serialize());

$( "button" ).on( "click", function(event) {
	var token = $("#csrfToken").attr("value");
	var header = $("#csrfHeader").attr("value");
	event.preventDefault();
	$.ajax({
		type: "POST",
	    url : "addSubmit",
	    //contentType: 'application/json',
        //dataType: 'text',
        	beforeSend: function (xhr) {
		xhr.setRequestHeader(header, token);
	},
	    data:$('form').serialize() ,
	    
	    success : function(data) {
	        
	        alert(data);
	    }
		
	});
	});
	
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};
</script>
</body>
</html>
